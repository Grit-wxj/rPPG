🫀 双模态生理特征活体检测器 (Dual-Modal rPPG & BCG Liveness Detector)

这是一个基于纯计算机视觉（Computer Vision）和信号处理（DSP）技术的非接触式活体检测工具。它不依赖深度学习黑盒模型，而是通过捕捉人类真实的生理特征来区分真人与 AI 生成视频（Deepfake）、照片或面具。

📖 核心原理

本项目采用了“光（Color）+ 动（Motion）”双模态交叉验证机制：

rPPG (远程光电容积脉搏波描记法):

检测心脏跳动引起的微弱面部肤色变化（肉眼不可见）。

算法：集成 POS (Plane-Orthogonal-to-Skin) 和 CHROM (Chrominance-based) 两种主流算法。

策略：全域多点布控（额头、脸颊、颈部、全局皮肤），抵抗局部遮挡和光照不均。

BCG (心挫记技术):

检测心脏泵血冲击力导致的头部微米级垂直震动。

算法：光流法 (Optical Flow) 追踪面部特征点位移。

策略：计算“肤色心率”与“震动心率”的同步性（Cross-Correlation），这是目前 AI 难以模拟的生物特征。

✨ 主要功能

多区域协同分析：同时监测额头、左右脸颊、颈部和全画面皮肤，自动选优。

抗干扰机制：

环境光剔除：对比背景信号，防止灯光频闪被误判为心跳。

AI 伪影拦截：识别高信噪比（SNR）但频谱熵（Entropy）过高的 AI 渲染噪点。

生理评分系统 (Bio-Score)：摒弃死板的阈值，采用综合评分制（心率合理性、节律性、信号强度、空间一致性等）。

无感知检测：无需用户配合动作（如眨眼、张嘴），静默完成检测。

🛠️ 安装指南

确保您的环境中已安装 Python 3.8 或更高版本。

1. 克隆或下载代码

将本项目的 rPPG.py (或其他主文件名) 下载到本地。

2. 自动安装依赖

代码内置了依赖检测功能，运行时会自动安装。您也可以手动安装：

pip install opencv-python numpy scipy


🚀 使用方法

方式 A：通过命令行运行

# 检测本地视频文件
python realtime_rppg_opencv.py "path/to/your/video.mp4"

# 使用默认摄像头进行实时检测
python realtime_rppg_opencv.py 0


方式 B：交互式运行

直接运行脚本，根据提示输入视频路径或按回车使用摄像头：

python realtime_rppg_opencv.py


操作控制

程序运行时，按 q 键停止检测并生成最终分析报告。

📊 结果解读

程序运行结束后，会显示详细的分析报告。

1. 最终判定 (Final Verdict)

✅ 【真人】 (REAL PERSON)：检测到符合生物学规律的脉搏信号和微动特征。

❌ 【AI/伪造】 (FAKE / AI)：信号缺失、杂乱，或存在明显的渲染伪影、环境干扰。

2. 关键指标说明

指标

含义

理想范围 (真人)

BPM

心率 (Beats Per Minute)

55 - 90 (静息状态)

SNR

信噪比 (信号强度)

> 0 dB (越高越好，但需结合熵值)

Entropy

频谱熵 (信号纯净度)

< 0.85 (越低越好，表示能量集中)

Rhythm

节律一致性

> 0.5 (心跳间隔是否稳定)

Bio-Score

生理综合评分

≥ 55分 判为真人

3. 常见判定依据 (Reason)

心率完美: BPM 落在 55-90 黄金区间。

光动同步: 脸色变化频率与头部震动频率高度一致（最强真人证据）。

多部位同步: 额头和脸颊测出的心率一致。

环境光干扰: 背景墙壁也在“跳动”，判定为假。

疑似AI高频伪影: 信号极强但频谱极乱（典型 Deepfake 特征）。

⚠️ 局限性与免责声明

光线依赖：rPPG 技术依赖光线反射，极暗环境或剧烈逆光可能导致漏检（假阴性）。

剧烈运动：如果视频人物在剧烈晃动，运动噪声可能会淹没微弱的心跳信号。

高压缩视频：严重的视频压缩（如低码率网传视频）会抹除肤色微变细节，可能导致真人被误判。

声明：本工具仅供学术研究和技术验证使用。不保证在所有场景下的 100% 准确率。请勿用于非法监控或侵犯隐私
